import { ImageVariantHelpers } from '~/mixins/ImageVariantHelpers'

export const MapMarkerHelpers = {
  mixins: [ImageVariantHelpers],
  data () {
    return {
      markers: {
        // Crag marker
        'crag-marker-00000': {
          iconUrl: '/markers/crag-marker-00000.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-00001': {
          iconUrl: '/markers/crag-marker-00001.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-00010': {
          iconUrl: '/markers/crag-marker-00010.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-00011': {
          iconUrl: '/markers/crag-marker-00011.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-00100': {
          iconUrl: '/markers/crag-marker-00100.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-00101': {
          iconUrl: '/markers/crag-marker-00101.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-00110': {
          iconUrl: '/markers/crag-marker-00110.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-00111': {
          iconUrl: '/markers/crag-marker-00111.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-01000': {
          iconUrl: '/markers/crag-marker-01000.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-01001': {
          iconUrl: '/markers/crag-marker-01001.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-01010': {
          iconUrl: '/markers/crag-marker-01010.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-01011': {
          iconUrl: '/markers/crag-marker-01011.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-01100': {
          iconUrl: '/markers/crag-marker-01100.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-01101': {
          iconUrl: '/markers/crag-marker-01101.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-01110': {
          iconUrl: '/markers/crag-marker-01110.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-01111': {
          iconUrl: '/markers/crag-marker-01111.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-10000': {
          iconUrl: '/markers/crag-marker-10000.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-10001': {
          iconUrl: '/markers/crag-marker-10001.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-10010': {
          iconUrl: '/markers/crag-marker-10010.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-10011': {
          iconUrl: '/markers/crag-marker-10011.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-10100': {
          iconUrl: '/markers/crag-marker-10100.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-10101': {
          iconUrl: '/markers/crag-marker-10101.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-10110': {
          iconUrl: '/markers/crag-marker-10110.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-10111': {
          iconUrl: '/markers/crag-marker-10111.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-11000': {
          iconUrl: '/markers/crag-marker-11000.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-11001': {
          iconUrl: '/markers/crag-marker-11001.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-11010': {
          iconUrl: '/markers/crag-marker-11010.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-11011': {
          iconUrl: '/markers/crag-marker-11011.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-11100': {
          iconUrl: '/markers/crag-marker-11100.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-11101': {
          iconUrl: '/markers/crag-marker-11101.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-11110': {
          iconUrl: '/markers/crag-marker-11110.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },
        'crag-marker-11111': {
          iconUrl: '/markers/crag-marker-11111.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },

        // Point of sales
        'place-of-sale-marker': {
          iconUrl: '/markers/place-of-sale-marker.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },

        // Sector
        'sector-marker': {
          iconUrl: '/markers/sector-marker.png', iconSize: [30, 30], iconAnchor: [15, 15], popupAnchor: [0, -15]
        },

        // Park
        'park-marker': {
          iconUrl: '/markers/park-marker.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        },

        // Photo
        'photo-marker': {
          iconUrl: '/markers/photo-marker.png', iconSize: [23, 30], iconAnchor: [11.5, 30], popupAnchor: [0, 0]
        }
      }
    }
  },

  methods: {
    localityMarker (properties) {
      const name = properties.name.length > 8 ? `${properties.name.substr(0, 6)}..` : properties.name
      const number = properties.partner_search_users_count
      const fontSize = number >= 100 ? '1.6px' : '2.3px'
      return {
        iconSize: [60, 55],
        iconAnchor: [15, 55],
        className: 'user-partner-map-marker',
        html: `
<svg
   viewBox="0 0 11.473866 10.612423"
   xmlns="http://www.w3.org/2000/svg"
>
  <g transform="translate(-68.753727,-134.12341)">
    <circle
       style="fill:#ffffff"
       cx="74.24511"
       cy="140.00099"
       r="2.0838175"
    />
    <text
       xml:space="preserve"
       style="font-size:${fontSize};line-height:1.25;font-family:sans-serif;text-align:center;letter-spacing:0;word-spacing:0;text-anchor:middle;fill:#000000"
       x="74.256287"
       y="140.87912"><tspan
         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:sans-serif;fill:#000000"
         x="74.256287"
         y="140.87912">${number}</tspan></text>
    <path
       d="m 74.245158,137.27787 c -1.542144,-5e-5 -2.792325,1.25009 -2.792337,2.79225 0.0013,0.60706 0.196176,1.19716 0.56288,1.68095 v 0 l 2.229457,2.98476 2.228594,-2.98476 v 0 c 0.366329,-0.48392 0.562702,-1.07402 0.563648,-1.68095 -1.1e-5,-1.54213 -1.250133,-2.79224 -2.792242,-2.79225 z m 0,0.93477 c 1.025819,3e-5 1.857383,0.83165 1.857372,1.85748 1.1e-5,1.02581 -0.831553,1.85741 -1.857372,1.85745 -1.025853,2e-5 -1.857476,-0.8316 -1.857463,-1.85745 -1.3e-5,-1.02587 0.83161,-1.85749 1.857463,-1.85748 z"
       style="fill:#31994e;stroke:none;" />
    <rect
       style="fill:#ffffff"
       width="11.473858"
       height="2.6152527"
       x="68.753731"
       y="134.12341"
       ry="1.3076264" />
    <text
       xml:space="preserve"
       style="font-size:2.14px;line-height:1.25;text-align:center;letter-spacing:0;word-spacing:0;text-anchor:middle;"
       x="74.500694"
       y="136.23689"><tspan
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:monospace;fill:#000000"
         x="74.500694"
         y="136.23689">${name}</tspan></text>
  </g>
</svg>
        `
      }
    },

    guideBookPaperMarker (properties) {
      const src = properties.attachments.cover.attached ? this.imageVariant(properties.attachments.cover, { fit: 'scale-down', height: 100, width: 100 }) : '/svg/paper-guide-book-default.svg'
      return {
        iconSize: [60, 60],
        iconAnchor: [30, 30],
        className: 'guide-book-paper-marker',
        html: `<img src="${src}" alt="couverture" />`
      }
    },

    gymMarker (properties) {
      const src = properties.attachments.logo.attached ? this.imageVariant(properties.attachments.logo, { fit: 'scale-down', height: 50, width: 50 }) : '/svg/gym-default-logo.svg'
      return {
        iconSize: [38, 38],
        iconAnchor: [19, 38],
        popupAnchor: [0, 9],
        className: 'gym-marker',
        html: `
<svg
   width="38"
   height="44.068954"
   viewBox="0 0 38 44.068956"
   xmlns="http://www.w3.org/2000/svg">
  <g transform="translate(-1.0948906e-7,-2.9655236)">
    <path
       style="fill:rgba(255,255,255,0.8);stroke:rgba(0,0,0,0.25);stroke-width:0.6899;stroke-linejoin:round;"
       d="m 6.8977131,3.3104736 c -3.6302279,0 -6.552763,2.8929521 -6.552763,6.4868016 V 34.133054 c 0,3.593849 2.9225351,6.48716 6.552763,6.48716 H 13.478997 L 19,46.689543 24.521003,40.620214 h 6.581284 c 3.630235,0 6.552763,-2.893311 6.552763,-6.48716 V 9.7972752 c 0,-3.5938495 -2.922528,-6.4868016 -6.552763,-6.4868016 z" />
     <image
       width="54.080173"
       height="54.080173"
       preserveAspectRatio="xMidYMid meet"
       xlink:href="${src}"
       x="151.27559"
       y="308.06467"
       clip-path="inset(0% round 8px)"
       transform="matrix(0.59171408,0,0,0.59171408,-86.511894,-176.32068)"
     />
  </g>
</svg>
`
      }
    }
  }
}
